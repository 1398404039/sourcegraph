/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
'use strict';
var async_1 = require("vs/base/common/async");
var diffComputer_1 = require("vs/editor/common/diff/diffComputer");
function getTextDocumentLines(document) {
    var result = [];
    for (var i = 0; i < document.lineCount; i++) {
        result.push(document.lineAt(i).text);
    }
    return result;
}
function computeDiff(oneDocument, otherDocument) {
    var oneLines = getTextDocumentLines(oneDocument);
    var otherLines = getTextDocumentLines(otherDocument);
    var computer = new diffComputer_1.DiffComputer(oneLines, otherLines, {
        shouldPostProcessCharChanges: false,
        shouldIgnoreTrimWhitespace: false,
        shouldConsiderTrimWhitespaceInEmptyCase: false
    });
    return async_1.toThenable(computer.computeDiff());
}
exports.computeDiff = computeDiff;
