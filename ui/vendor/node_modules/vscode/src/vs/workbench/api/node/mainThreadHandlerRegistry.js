/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
'use strict';
/**
 * MainThreadHandlerRegistry maintains a collection of objects by handle.
 */
var MainThreadHandlerRegistry = (function () {
    function MainThreadHandlerRegistry() {
        this._nextChildHandle = 0;
        this._registrations = Object.create(null);
    }
    /**
     * registerChild registers a child object of handle.
     * It returns the new handle assigned to the child.
     */
    MainThreadHandlerRegistry.prototype.registerChild = function (handle, child) {
        var childHandle = this._nextChildHandle;
        this._nextChildHandle++;
        if (!this._registrations[handle]) {
            this._registrations[handle] = Object.create(null);
        }
        this._registrations[handle][childHandle] = child;
        return childHandle;
    };
    /**
     * getChild returns the object associated with handle and childHandle, if it exists.
     */
    MainThreadHandlerRegistry.prototype.getChild = function (handle, childHandle) {
        if (!this._registrations[handle]) {
            return undefined;
        }
        return this._registrations[handle][childHandle];
    };
    /**
     * unregister unregisters all child objects of handle.
     */
    MainThreadHandlerRegistry.prototype.unregister = function (handle) {
        delete this._registrations[handle];
    };
    /**
     * unregisterChild unregisters the object associated with handle and childHandle.
     */
    MainThreadHandlerRegistry.prototype.unregisterChild = function (handle, childHandle) {
        if (this._registrations[handle]) {
            delete this._registrations[handle][childHandle];
        }
    };
    return MainThreadHandlerRegistry;
}());
exports.MainThreadHandlerRegistry = MainThreadHandlerRegistry;
