/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
'use strict';
var winjs_base_1 = require("vs/base/common/winjs.base");
var lifecycle_1 = require("vs/base/common/lifecycle");
var SCMService = (function () {
    function SCMService() {
        this.providers = [];
    }
    SCMService.prototype.getBaselineResource = function (resource) {
        var promises = this.providers
            .map(function (p) { return p.getBaselineResource(resource); });
        return winjs_base_1.TPromise.join(promises).then(function (originalResources) {
            // TODO@Joao: just take the first
            return originalResources.filter(function (uri) { return !!uri; })[0];
        });
    };
    SCMService.prototype.registerBaselineResourceProvider = function (provider) {
        var _this = this;
        this.providers = [provider].concat(this.providers);
        return lifecycle_1.toDisposable(function () {
            var index = _this.providers.indexOf(provider);
            if (index < 0) {
                return;
            }
            _this.providers.splice(index, 1);
        });
    };
    return SCMService;
}());
exports.SCMService = SCMService;
