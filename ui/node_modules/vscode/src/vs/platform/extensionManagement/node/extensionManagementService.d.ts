import { TPromise } from 'vs/base/common/winjs.base';
import { IExtensionManagementService, IExtensionGalleryService, ILocalExtension, IGalleryExtension, InstallExtensionEvent, DidInstallExtensionEvent, LocalExtensionType } from 'vs/platform/extensionManagement/common/extensionManagement';
import { IEnvironmentService } from 'vs/platform/environment/common/environment';
import Event from 'vs/base/common/event';
import { IChoiceService } from 'vs/platform/message/common/message';
export declare class ExtensionManagementService implements IExtensionManagementService {
    private environmentService;
    private choiceService;
    private galleryService;
    _serviceBrand: any;
    private extensionsPath;
    private obsoletePath;
    private obsoleteFileLimiter;
    private disposables;
    private _onInstallExtension;
    onInstallExtension: Event<InstallExtensionEvent>;
    private _onDidInstallExtension;
    onDidInstallExtension: Event<DidInstallExtensionEvent>;
    private _onUninstallExtension;
    onUninstallExtension: Event<string>;
    private _onDidUninstallExtension;
    onDidUninstallExtension: Event<string>;
    constructor(environmentService: IEnvironmentService, choiceService: IChoiceService, galleryService: IExtensionGalleryService);
    install(zipPath: string): TPromise<void>;
    installFromGallery(extension: IGalleryExtension, promptToInstallDependencies?: boolean): TPromise<void>;
    private installCompatibleVersion(extension, installDependencies, promptToInstallDependencies);
    private getDependenciesToInstall(extension, checkDependecies);
    private installWithDependencies(extension);
    private bulkInstallWithDependencies(extension, dependecies);
    private rollback(localExtension, dependecies);
    private filterOutInstalled(extensions);
    private filterOutUnInstalled(extensions);
    private getGalleryExtensionForLocalExtension(galleryExtensions, localExtension);
    private downloadAndInstall(extension);
    private installExtension(zipPath, id, metadata?);
    uninstall(extension: ILocalExtension): TPromise<void>;
    private uninstallExtension(id);
    getInstalled(type?: LocalExtensionType): TPromise<ILocalExtension[]>;
    private scanSystemExtensions();
    private scanUserExtensions();
    private scanExtensions(root, type);
    removeDeprecatedExtensions(): TPromise<void>;
    private getOutdatedExtensionIds();
    private isObsolete(id);
    private filterObsolete(...ids);
    private setObsolete(id);
    private unsetObsolete(id);
    private getObsoleteExtensions();
    private withObsoleteExtensions<T>(fn);
    dispose(): void;
}
