/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
"use strict";
var getmac = require('getmac');
var crypto = require('crypto');
var winjs_base_1 = require('vs/base/common/winjs.base');
var errors = require('vs/base/common/errors');
var uuid = require('vs/base/common/uuid');
function getMachineId() {
    return new winjs_base_1.TPromise(function (resolve) {
        try {
            getmac.getMac(function (error, macAddress) {
                if (!error) {
                    resolve(crypto.createHash('sha256').update(macAddress, 'utf8').digest('hex'));
                }
                else {
                    resolve(uuid.generateUuid()); // fallback, generate a UUID
                }
            });
        }
        catch (err) {
            errors.onUnexpectedError(err);
            resolve(uuid.generateUuid()); // fallback, generate a UUID
        }
    });
}
exports.getMachineId = getMachineId;
