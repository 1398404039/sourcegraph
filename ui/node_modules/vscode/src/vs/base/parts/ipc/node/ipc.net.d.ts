import { Socket, Server as NetServer } from 'net';
import { TPromise } from 'vs/base/common/winjs.base';
import { IDisposable } from 'vs/base/common/lifecycle';
import Event from 'vs/base/common/event';
import { IChannelServer, IChannelClient, IRoutingChannelClient, IClientRouter, IChannel } from 'vs/base/parts/ipc/common/ipc';
export declare class Server implements IChannelServer, IRoutingChannelClient, IDisposable {
    private server;
    private channels;
    private router;
    constructor(server: NetServer);
    getChannel<T extends IChannel>(channelName: string, router: IClientRouter): T;
    registerChannel(channelName: string, channel: IChannel): void;
    dispose(): void;
}
export declare class Client implements IChannelClient, IChannelServer, IDisposable {
    private socket;
    private channelClient;
    private channelServer;
    private _onClose;
    readonly onClose: Event<void>;
    constructor(socket: Socket, id: string);
    getChannel<T extends IChannel>(channelName: string): T;
    registerChannel(channelName: string, channel: IChannel): void;
    dispose(): void;
}
export declare function serve(port: number): TPromise<Server>;
export declare function serve(namedPipe: string): TPromise<Server>;
export declare function connect(port: number, clientId: string): TPromise<Client>;
export declare function connect(namedPipe: string, clientId: string): TPromise<Client>;
