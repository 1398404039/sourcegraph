import { IEditor as IBaseEditor } from 'vs/platform/editor/common/editor';
import { IWorkbenchEditorService } from 'vs/workbench/services/editor/common/editorService';
import { IHistoryService } from 'vs/workbench/services/history/common/history';
import { Selection } from 'vs/editor/common/core/selection';
import { IEditorInput, ITextEditorOptions, IResourceInput } from 'vs/platform/editor/common/editor';
import { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';
import { IDisposable } from 'vs/base/common/lifecycle';
import { IStorageService } from 'vs/platform/storage/common/storage';
import { ILifecycleService } from 'vs/platform/lifecycle/common/lifecycle';
import { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';
import { IEditorGroupService } from 'vs/workbench/services/group/common/groupService';
import { IEnvironmentService } from 'vs/platform/environment/common/environment';
import { IIntegrityService } from 'vs/platform/integrity/common/integrity';
/**
 * Stores the selection & view state of an editor and allows to compare it to other selection states.
 */
export declare class EditorState {
    private _editorInput;
    private _selection;
    private static EDITOR_SELECTION_THRESHOLD;
    constructor(_editorInput: IEditorInput, _selection: Selection);
    readonly editorInput: IEditorInput;
    readonly selection: Selection;
    justifiesNewPushState(other: EditorState): boolean;
}
export declare abstract class BaseHistoryService {
    protected editorGroupService: IEditorGroupService;
    protected editorService: IWorkbenchEditorService;
    protected contextService: IWorkspaceContextService;
    private environmentService;
    protected toUnbind: IDisposable[];
    private activeEditorListeners;
    private _isPure;
    constructor(editorGroupService: IEditorGroupService, editorService: IWorkbenchEditorService, contextService: IWorkspaceContextService, environmentService: IEnvironmentService, integrityService: IIntegrityService);
    private onEditorsChanged();
    private onEditorEvent(editor);
    private updateWindowTitle(input?);
    protected abstract handleEditorSelectionChangeEvent(editor?: IBaseEditor): void;
    protected abstract handleActiveEditorChange(editor?: IBaseEditor): void;
    protected getWindowTitle(input?: IEditorInput): string;
    private doGetWindowTitle(input?);
    dispose(): void;
}
export declare class HistoryService extends BaseHistoryService implements IHistoryService {
    private storageService;
    private lifecycleService;
    private instantiationService;
    _serviceBrand: any;
    private static STORAGE_KEY;
    private static MAX_HISTORY_ITEMS;
    private static MAX_STACK_ITEMS;
    private static MAX_RECENTLY_CLOSED_EDITORS;
    private stack;
    private index;
    private blockStackChanges;
    private currentFileEditorState;
    private history;
    private recentlyClosedFiles;
    private loaded;
    private registry;
    constructor(editorService: IWorkbenchEditorService, editorGroupService: IEditorGroupService, environmentService: IEnvironmentService, contextService: IWorkspaceContextService, storageService: IStorageService, lifecycleService: ILifecycleService, instantiationService: IInstantiationService, integrityService: IIntegrityService);
    private registerListeners();
    private onEditorClosed(event);
    reopenLastClosedEditor(): void;
    forward(): void;
    back(): void;
    clear(): void;
    private navigate();
    protected handleEditorSelectionChangeEvent(editor?: IBaseEditor): void;
    protected handleActiveEditorChange(editor?: IBaseEditor): void;
    private handleEditorEventInHistory(editor?);
    remove(input: IEditorInput): void;
    private removeFromHistory(input, index?);
    private indexOf(input);
    private handleEditorEventInStack(editor, storeSelection);
    private handleTextEditorEvent(editor, storeSelection);
    private handleNonTextEditorEvent(editor);
    add(input: IEditorInput, options?: ITextEditorOptions): void;
    private addToStack(input, options?);
    private preferResourceInput(input);
    private sameOptions(optionsA?, optionsB?);
    private removeFromStack(input);
    private removeFromRecentlyClosedFiles(input);
    private isFileOpened(resource, group);
    private matches(typedInput, input);
    private matchesFile(resource, input);
    getHistory(): (IEditorInput | IResourceInput)[];
    private ensureLoaded();
    private save();
    private load();
}
