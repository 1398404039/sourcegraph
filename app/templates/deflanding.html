{{define "Head"}}
	{{template "HeadFromMeta" $}}
{{end}}

{{define "Nav"}}

	<div class="bg-white border-bottom border-cool-gray-3-2 shadow py2 px2 lh0">
		<a href="/"><img class="spin" src="{{absAssetURL .Ctx "/img/sourcegraph-mark.svg"}}" width="20" /></a>
	</div>

{{end}}

{{define "Body"}}

<div ignore-csp style="max-width: 680px" class="mx-auto mx2">

	<div class="mb3">
		<a href="{{.DefSnippet.SourceURL}}" class="btn btn-blue right mt2">View definition</a>
		<h1 class="mb0">
			{{with .Def.FmtStrings}}
				<span class="code">
					{{.DefKeyword}}
					{{.Name.ScopeQualified}}
				</span>
			{{end}}
		</h1>

		<p>
			Defined in <a href="{{.FileURL}}">{{.Repo.URI}}/{{.Def.Def.File}}</a>
		</p>
	</div>

	{{with .Def}}

	{{if .DocHTML.HTML}}
	<div class="mt3 mb4">
		<h2>Description</h2>
		<p>{{dangerouslySetHTML .DocHTML.HTML}}</p>
	</div>
	{{end}}

	{{end}}{{/* end "with .Def" */}}

	{{if .RefSnippets}}
		<div class="my4">

			<h2>Examples</h2>

			{{range .RefSnippets}}
				<a href="{{.SourceURL}}" class="plainlink">
					<p><pre class="snippet rounded">{{renderSnippet .}}</pre></p>
				</a>
			{{end}}
		</div>
	{{end}}

	<div class="my4">
		<h2>
			<span class="code">{{.Def.Name}}</span> is referenced in {{.RefLocs.TotalRepos}} {{numberedNoun .RefLocs.TotalRepos "repository"}}
		</h2>

		{{range $repo := .RefLocs.RepoRefs}}
			<a href="{{urlToRepo $repo.Repo}}">
				<strong>{{$repo.Repo}}</strong>
			</a>
			<ul>
				{{range $file := $repo.Files}}
				<li>{{$file.Count}} {{numberedNoun $file.Count "reference"}} in <a href="{{urlToBlob $repo.Repo $file.Path}}">{{$file.Path}}</a></li>
				{{end}}
			</ul>
		{{end}}

		{{if .TruncatedRefLocs}}
			<p>...</p>
		{{end}}
	</div>

	<div class="my3">
		<h2>Definition</h2>
		<a href="{{.DefSnippet.SourceURL}}" class="plainlink">
			<pre class="bg-white code border rounded border-cool-gray-4 p2 snippet">{{renderSnippet .DefSnippet}}</pre>
		</a>
	</div>

</div>
{{end}}

{{define "Footer"}}
{{end}}
