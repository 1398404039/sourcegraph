{
  "_args": [
    [
      "git://github.com/amplitude/Amplitude-Javascript#v2.11.0",
      "/Users/rothfels/go/src/sourcegraph.com/sourcegraph/sourcegraph/app"
    ]
  ],
  "_from": "git://github.com/amplitude/Amplitude-Javascript.git#v2.11.0",
  "_id": "amplitude-js@2.11.0",
  "_inCache": true,
  "_installable": true,
  "_location": "/amplitude-js",
  "_phantomChildren": {},
  "_requested": {
    "hosted": {
      "directUrl": "https://raw.githubusercontent.com/amplitude/Amplitude-Javascript/v2.11.0/package.json",
      "gitUrl": "git://github.com/amplitude/Amplitude-Javascript.git#v2.11.0",
      "httpsUrl": "git+https://github.com/amplitude/Amplitude-Javascript.git#v2.11.0",
      "shortcut": "github:amplitude/Amplitude-Javascript#v2.11.0",
      "ssh": "git@github.com:amplitude/Amplitude-Javascript.git#v2.11.0",
      "sshUrl": "git+ssh://git@github.com/amplitude/Amplitude-Javascript.git#v2.11.0",
      "type": "github"
    },
    "name": null,
    "raw": "git://github.com/amplitude/Amplitude-Javascript#v2.11.0",
    "rawSpec": "git://github.com/amplitude/Amplitude-Javascript#v2.11.0",
    "scope": null,
    "spec": "git://github.com/amplitude/Amplitude-Javascript.git#v2.11.0",
    "type": "hosted"
  },
  "_requiredBy": [
    "/"
  ],
  "_resolved": "git://github.com/amplitude/Amplitude-Javascript.git#eb6796735c99aa8e7f27ae20ef08241473f62b94",
  "_shasum": "9bb0dc53557e0c34fcc9f032a91af994d5ea651e",
  "_shrinkwrap": null,
  "_spec": "git://github.com/amplitude/Amplitude-Javascript#v2.11.0",
  "_where": "/Users/rothfels/go/src/sourcegraph.com/sourcegraph/sourcegraph/app",
  "author": {
    "email": "support@amplitude.com",
    "name": "Amplitude"
  },
  "bugs": {
    "url": "https://github.com/amplitude/amplitude-javascript/issues"
  },
  "dependencies": {},
  "description": "Javascript library for Amplitude Analytics",
  "devDependencies": {
    "duo": "0.8",
    "express": "4.x",
    "fs-extra": "^0.15.0",
    "jsdoc": "3.4.0",
    "jshint": "^2.6.3",
    "mocha-phantomjs": "^3.6.0",
    "uglify-js": ">= 1.3.4"
  },
  "gitHead": "eb6796735c99aa8e7f27ae20ef08241473f62b94",
  "homepage": "https://github.com/amplitude/amplitude-javascript#readme",
  "keywords": [
    "amplitude",
    "analytics"
  ],
  "license": "MIT",
  "main": "src/index.js",
  "name": "amplitude-js",
  "optionalDependencies": {},
  "readme": "[![Circle CI](https://circleci.com/gh/amplitude/Amplitude-Javascript.svg?style=badge&circle-token=80de0dbb7632b2db13f76ccb20a79bbdfc50c215)](https://circleci.com/gh/amplitude/Amplitude-Javascript)\n\nAmplitude-Javascript\n====================\n\nThis Readme will guide you through using Amplitude's Javascript SDK to track users and events. See our [SDK documentation](https://rawgit.com/amplitude/Amplitude-Javascript/master/documentation/Amplitude.html) for a description of all available SDK methods.\n\n# Setup #\n1. If you haven't already, go to http://amplitude.com and register for an account. You will receive an API Key.\n2. On every page that uses analytics, paste the following Javascript code between the `<head>` and `</head>` tags:\n\n    ```html\n        <script type=\"text/javascript\">\n          (function(e,t){var n=e.amplitude||{_q:[]};var r=t.createElement(\"script\");r.type=\"text/javascript\";\n          r.async=true;r.src=\"https://d24n15hnbwhuhn.cloudfront.net/libs/amplitude-2.11.0-min.gz.js\";\n          r.onload=function(){e.amplitude.runQueuedFunctions()};var i=t.getElementsByTagName(\"script\")[0];\n          i.parentNode.insertBefore(r,i);var s=function(){this._q=[];return this};function o(e){\n          s.prototype[e]=function(){this._q.push([e].concat(Array.prototype.slice.call(arguments,0)));\n          return this}}var a=[\"add\",\"append\",\"clearAll\",\"prepend\",\"set\",\"setOnce\",\"unset\"];for(var c=0;c<a.length;c++){\n          o(a[c])}n.Identify=s;var u=[\"init\",\"logEvent\",\"logRevenue\",\"setUserId\",\"setUserProperties\",\"setOptOut\",\"setVersionName\",\"setDomain\",\"setDeviceId\",\"setGlobalUserProperties\",\"identify\",\"clearUserProperties\"];\n          function p(e){function t(t){e[t]=function(){e._q.push([t].concat(Array.prototype.slice.call(arguments,0)));\n          }}for(var n=0;n<u.length;n++){t(u[n])}}p(n);e.amplitude=n})(window,document);\n\n          amplitude.init(\"YOUR_API_KEY_HERE\");\n        </script>\n    ```\n\n    Note: if you are using [RequireJS](http://requirejs.org/), follow these [alternate instructions](https://github.com/amplitude/Amplitude-Javascript#loading-with-requirejs) for Step 2.\n\n3. Replace `YOUR_API_KEY_HERE` with the API Key given to you.\n4. To track an event anywhere on the page, call:\n\n    ```javascript\n    amplitude.logEvent('EVENT_IDENTIFIER_HERE');\n    ```\n\n5. Events are uploaded immediately and saved to the browser's local storage until the server confirms the upload. After calling logEvent in your app, you will immediately see data appear on Amplitude.\n\n# Tracking Events #\n\nIt's important to think about what types of events you care about as a developer. You should aim to track between 20 and 200 types of events on your site. Common event types are actions the user initiates (such as pressing a button) and events you want the user to complete (such as filling out a form, completing a level, or making a payment).\n\nHere are some resources to help you with your instrumentation planning:\n  * [Event Tracking Quick Start Guide](https://amplitude.zendesk.com/hc/en-us/articles/207108137).\n  * [Event Taxonomy and Best Practices](https://amplitude.zendesk.com/hc/en-us/articles/211988918).\n\nHaving large amounts of distinct event types, event properties and user properties, however, can make visualizing and searching of the data very confusing. By default we only show the first:\n  * 1000 distinct event types\n  * 2000 distinct event properties\n  * 1000 distinct user properties\n\nAnything past the above thresholds will not be visualized. **Note that the raw data is not impacted by this in any way, meaning you can still see the values in the raw data, but they will not be visualized on the platform.** We have put in very conservative estimates for the event and property caps which we donâ€™t expect to be exceeded in any practical use case. If you feel that your use case will go above those limits please reach out to support@amplitude.com.\n\n# Settings Custom User IDs #\n\nIf your app has its own login system that you want to track users with, you can call `setUserId` at any time:\n\n```javascript\namplitude.setUserId('USER_ID_HERE');\n```\n\nA user's data will be merged on the backend so that any events up to that point from the same browser will be tracked under the same user. Note: if a user logs out, or you want to log the events under an anonymous user, you may set the userId to `null` like so:\n\n```javascript\namplitude.setUserId(null); // not string 'null'\n```\n\nYou can also add the user ID as an argument to the `init` call:\n\n```javascript\namplitude.init('YOUR_API_KEY_HERE', 'USER_ID_HERE');\n```\n\n# Setting Event Properties #\n\nYou can attach additional data to any event by passing a Javascript object as the second argument to `logEvent`. The Javascript object should be in the form of key + value pairs that can be JSON serialized. The keys should be string values. The values can be booleans, strings, numbers, arrays of strings/numbers/booleans, nested Javascript objects, and errors (note you cannot nest arrays or Javascript objects inside array values). The SDK will validate the event properties that you set and will log any errors or warnings to console if there are any issues. Here is an example:\n\n```javascript\nvar eventProperties = {};\neventProperties.key = 'value';\namplitude.logEvent('EVENT_IDENTIFIER_HERE', eventProperties);\n```\n\nAlternatively, you can set multiple event properties like this:\n```javascript\nvar eventProperties = {\n    'color': 'blue',\n    'age': 20,\n    'key': 'value'\n};\namplitude.logEvent('EVENT_IDENTIFIER_HERE', eventProperties);\n```\n\n# User Properties and User Property Operations #\n\nThe SDK supports the operations `set`, `setOnce`, `unset`, and `add` on individual user properties. The operations are declared via a provided `Identify` interface. Multiple operations can be chained together in a single `Identify` object. The `Identify` object is then passed to the Amplitude client to send to the server. The results of the operations will be visible immediately in the dashboard, and take effect for events logged after.\n\n1. `set`: this sets the value of a user property.\n\n    ```javascript\n    var identify = new amplitude.Identify().set('gender', 'female').set('age', 20);\n    amplitude.identify(identify);\n    ```\n\n2. `setOnce`: this sets the value of a user property only once. Subsequent `setOnce` operations on that user property will be ignored. In the following example, `sign_up_date` will be set once to `08/24/2015`, and the following setOnce to `09/14/2015` will be ignored:\n\n    ```javascript\n    var identify = new amplitude.Identify().setOnce('sign_up_date', '08/24/2015');\n    amplitude.identify(identify);\n\n    var identify = new amplitude.Identify().setOnce('sign_up_date', '09/14/2015');\n    amplitude.identify(identify);\n    ```\n\n3. `unset`: this will unset and remove a user property.\n\n    ```javascript\n    var identify = new amplitude.Identify().unset('gender').unset('age');\n    amplitude.identify(identify);\n    ```\n\n4. `add`: this will increment a user property by some numerical value. If the user property does not have a value set yet, it will be initialized to 0 before being incremented.\n\n    ```javascript\n    var identify = new amplitude.Identify().add('karma', 1).add('friends', 1);\n    amplitude.identify(identify);\n    ```\n\n5. `append`: this will append a value or values to a user property. If the user property does not have a value set yet, it will be initialized to an empty list before the new values are appended. If the user property has an existing value and it is not a list, it will be converted into a list with the new value appended.\n\n    ```javascript\n    var identify = new amplitude.Identify().append('ab-tests', 'new-user-test').append('some_list', [1, 2, 3, 4, 'values']);\n    amplitude.identify(identify);\n    ```\n\n6. `prepend`: this will prepend a value or values to a user property. Prepend means inserting the value(s) at the front of a given list. If the user property does not have a value set yet, it will be initialized to an empty list before the new values are prepended. If the user property has an existing value and it is not a list, it will be converted into a list with the new value prepended.\n\n    ```javascript\n    var identify = new amplitude.Identify().prepend('ab-tests', 'new-user-test').prepend('some_list', [1, 2, 3, 4, 'values']);\n    amplitude.identify(identify);\n    ```\n\nNote: if a user property is used in multiple operations on the same `Identify` object, only the first operation will be saved, and the rest will be ignored. In this example, only the set operation will be saved, and the add and unset will be ignored:\n\n```javascript\nvar identify = new amplitude.Identify()\n    .set('karma', 10)\n    .add('karma', 1)\n    .unset('karma');\namplitude.identify(identify);\n```\n\n### Arrays in User Properties ###\n\nThe SDK supports arrays in user properties. Any of the user property operations above (with the exception of `add`) can accept a Javascript array. You can directly `set` arrays, or use `append` to generate an array.\n\n```javascript\nvar identify = new amplitude.Identify()\n    .set('colors', ['rose', 'gold'])\n    .append('ab-tests', 'campaign_a')\n    .append('existing_list', [4, 5]);\namplitude.identify(identify);\n```\n\n### Setting Multiple Properties with `setUserProperties` ###\n\nYou may use `setUserProperties` shorthand to set multiple user properties at once. This method is simply a wrapper around `Identify.set` and `identify`.\n\n```javascript\nvar userProperties = {\n    gender: 'female',\n    age: 20\n};\namplitude.setUserProperties(userProperties);\n```\n\n### Clearing User Properties ###\n\nYou may use `clearUserProperties` to clear all user properties at once. Note: the result is irreversible!\n\n```javascript\namplitude.clearUserProperties();\n```\n\n# Tracking Revenue #\n\nTo track revenue from a user, call\n\n```javascript\namplitude.logRevenue(9.99, 1, 'product');\n```\n\nThe function takes a unit price, a quantity, and a product identifier. Quantity and product identifier are optional parameters.\n\nThis allows us to automatically display data relevant to revenue on the Amplitude website, including average revenue per daily active user (ARPDAU), 7, 30, and 90 day revenue, lifetime value (LTV) estimates, and revenue by advertising campaign cohort and daily/weekly/monthly cohorts.\n\n# Opting User Out of Logging #\n\nYou can turn off logging for a given user:\n\n```javascript\namplitude.setOptOut(true);\n```\n\nNo events will be saved or sent to the server while opt out is enabled. The opt out\nsetting will persist across page loads. Calling\n\n```javascript\namplitude.setOptOut(false);\n```\n\nwill reenable logging.\n\n# Configuration Options #\n\nYou can configure Amplitude by passing an object as the third argument to the `init`:\n\n```javascript\namplitude.init('YOUR_API_KEY_HERE', null, {\n    // optional configuration options\n    saveEvents: true,\n    includeUtm: true,\n    includeReferrer: true,\n    batchEvents: true,\n    eventUploadThreshold: 50\n});\n```\n\n| option | type | description | default |\n|------------|----------|------------------------------------------------------------------------|-----------|\n| batchEvents | boolean | If `true`, events are batched together and uploaded only when the number of unsent events is greater than or equal to `eventUploadThreshold` or after `eventUploadPeriodMillis` milliseconds have passed since the first unsent event was logged. | `false` |\n| cookieExpiration | number | The number of days after which the Amplitude cookie will expire | 365\\*10 (10 years) |\n| cookieName | string | Custom name for the Amplitude cookie | 'amplitude_id' |\n| deviceId | string | Custom device ID to set. Note this is not recommended unless you really know what you are doing (like if you have your own system for tracking user devices) | Randomly generated UUID |\n| domain | string | Custom cookie domain | The top domain of the current page's url |\n| eventUploadPeriodMillis | number | Amount of time in milliseconds that the SDK waits before uploading events if `batchEvents` is `true`. | 30\\*1000 (30 sec) |\n| eventUploadThreshold | number | Minimum number of events to batch together per request if `batchEvents` is `true`. | 30 |\n| includeReferrer | boolean | If `true`, captures the `referrer` and `referring_domain` for each session, as well as the user's `initial_referrer` and `initial_referring_domain` via a set once operation. | `false` |\n| includeUtm | boolean | If `true`, finds utm parameters in the query string or the __utmz cookie, parses, and includes them as user propeties on all events uploaded. | `false` |\n| language | string | Custom language to set | Language determined by browser |\n| optOut | boolean | Whether to disable tracking for the current user | `false` |\n| platform | string | Custom platform to set | 'Web' |\n| saveEvents | boolean | If `true`, saves events to localStorage and removes them upon successful upload.<br><i>NOTE:</i> Without saving events, events may be lost if the user navigates to another page before events are uploaded. | `true` |\n| savedMaxCount | number | Maximum number of events to save in localStorage. If more events are logged while offline, old events are removed. | 1000 |\n| sessionTimeout | number | Time between logged events before a new session starts in milliseconds | 30\\*60\\*1000 (30 min) |\n| uploadBatchSize | number | Maximum number of events to send to the server per request. | 100 |\n\n# Advanced #\nThis SDK automatically grabs useful data about the browser, including browser type and operating system version.\n\n### Setting Version Name ###\nBy default, no version name is set. You can specify a version name to distinguish between different versions of your site by calling `setVersionName`:\n\n```javascript\namplitude.setVersionName('VERSION_NAME_HERE');\n```\n\n### Custom Device Ids ###\nDevice IDs are generated randomly, although you can define a custom device ID setting it as a configuration option or by calling:\n\n```javascript\namplitude.setDeviceId('CUSTOM_DEVICE_ID');\n```\n\n**Note: this is not recommended unless you really know what you are doing** (like if you have your own system for tracking user devices). Make sure the deviceId you set is sufficiently unique (we recommend something like a UUID - see `src/uuid.js` for an example of how to generate) to prevent conflicts with other devices in our system.\n\n### Callbacks for LogEvent, Identify, and Redirect ###\nYou can pass a callback function to logEvent and identify, which will get called after receiving a response from the server:\n\n```javascript\namplitude.logEvent(\"EVENT_IDENTIFIER_HERE\", null, callback_function);\n```\n\n```javascript\nvar identify = new amplitude.Identify().set('key', 'value');\namplitude.identify(identify, callback_function);\n```\n\nThe status and response body from the server are passed to the callback function, which you might find useful. An example of a callback function which redirects the browser to another site after a response:\n\n```javascript\nvar callback_function = function(status, response) {\n    if (status === 200 && response === 'success') {\n        // do something here\n    }\n    window.location.replace('URL_OF_OTHER_SITE');\n};\n```\n\nYou can also use this to track outbound links on your website. For example you would have a link like this:\n\n```html\n<a href=\"javascript:trackClickLinkA();\">Link A</a>\n```\n\nAnd then you would define a function that is called when the link is clicked like this:\n\n```javascript\nvar trackClickLinkA = function() {\n    amplitude.logEvent('Clicked Link A', null, function() {\n        window.location='LINK_A_URL';\n    });\n};\n```\n\nIn the case that `optOut` is true, then no event will be logged, but the callback will be called. In the case that `batchEvents` is true, if the batch requirements `eventUploadThreshold` and `eventUploadPeriodMillis` are not met when `logEvent` is called, then no request is sent, but the callback is still called. In these cases, the callback will be called with an input status of 0 and response 'No request sent'.\n\n### Init Callbacks ###\nYou can also pass a callback function to init, which will get called after the SDK finishes its asynchronous loading. *Note: no values are passed to the init callback function*:\n\n```javascript\namplitude.init('YOUR_API_KEY_HERE', 'USER_ID_HERE', null, function() {\n  console.log(amplitude.options.deviceId);  // access Amplitude's deviceId after initialization\n});\n```\n\n### Loading with RequireJS ###\nIf you are using [RequireJS](http://requirejs.org/) to load your Javascript files, you can also use it to load the Amplitude Javascript SDK script directly instead of using our loading snippet. On every page that uses analytics, paste the following Javascript code between the `<head>` and `</head>` tags:\n\n```html\n  <script src='scripts/require.js'></script>  <!-- loading RequireJS -->\n  <script>\n    require(['https://d24n15hnbwhuhn.cloudfront.net/libs/amplitude-2.11.0-min.gz.js'], function(amplitude) {\n      amplitude.init('YOUR_API_KEY_HERE'); // replace YOUR_API_KEY_HERE with your Amplitude api key.\n      window.amplitude = amplitude;  // You can bind the amplitude object to window if you want to use it directly.\n      amplitude.logEvent('Clicked Link A');\n    });\n  </script>\n```\n\nYou can also define the path in your RequireJS configuration like so:\n```html\n  <script src='scripts/require.js'></script>  <!-- loading RequireJS -->\n  <script>\n    requirejs.config({\n      paths: {\n        'amplitude': 'https://d24n15hnbwhuhn.cloudfront.net/libs/amplitude-2.11.0-min.gz'\n      }\n    });\n\n    require(['amplitude'], function(amplitude) {\n      amplitude.init('YOUR_API_KEY_HERE'); // replace YOUR_API_KEY_HERE with your Amplitude api key.\n      window.amplitude = amplitude;  // You can bind the amplitude object to window if you want to use it directly.\n      amplitude.logEvent('Clicked Link A');\n    });\n  </script>\n  <script>\n    require(['amplitude'], function(amplitude) {\n      amplitude.logEvent('Page loaded');\n    });\n  </script>\n```\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/amplitude/amplitude-javascript.git"
  },
  "scripts": {
    "test": "make test"
  },
  "version": "2.11.0"
}
